import{_ as x,m as U,t as m,a as D,S as w,o as d,c as n,b as t,F as p,z as b,h as u,v as _,e as f,g,i as a,C as c}from"./index-C-_izT2N.js";import{U as k}from"./UserState-CIYhNpnI.js";import{a as h}from"./axios-Bo0ATomq.js";var I={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"wuyi0020",VITE_ADMIN_USERNAME:"wuyi0020@gmail.com",VITE_ADMIN_PASSWORD:"wuyi0020",BASE_URL:"/pixelmissions/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:P,VITE_API_PATH:A}=I,M=["userName","userEmail","userID","userHasLogIn","AdminToken","Alldata"],E=["getAlldata","getCookie"];let y=null,v=null;const L={data(){return{tempProduct:{},Artwork:{},UserList:{},ComissionList:{}}},methods:{...U(k,E),async GetData(){const l=await this.getAlldata(!0);this.subGroup(Object.values(l))},subGroup(l){this.Artwork=l.filter(e=>e.category==="作品"),this.UserList=l.filter(e=>e.category==="使用者"),this.ComissionList=l.filter(e=>e.category==="報價")},editProduct(l){y.show(),this.tempProduct={...l}},editProductSave(){const l=JSON.parse(this.tempProduct),e=`${P}/api/${A}/admin/product/${l.id}`;h.defaults.headers.common.Authorization=this.getCookie("DashbordAdminToken"),h.put(e,{data:l}).then(C=>{m.success("修改成功"),y.hide()}).catch(()=>{m.error("修改失敗")}),this.getAlldata(!0)},deletProduct(l){v.show(),this.tempProduct={...l}},deleteProductConfirm(){const l=this.tempProduct.id,e=`${P}/api/${A}/admin/product/${l}`;h.defaults.headers.common.Authorization=this.getCookie("DashbordAdminToken"),h.delete(e).then(()=>{this.GetData(),m.success("刪除成功")}),v.hide()}},computed:{...D(k,M)},mounted(){this.GetData(),y=new w(document.getElementById("editModal"),{keyboard:!0,backdrop:"static"}),v=new w(document.getElementById("deleteModal"),{keyboard:!0,backdrop:"static"})}},V={class:"container"},S={class:"d-flex flex-wrap"},T={class:"col-12 col"},N=t("h2",{type:"button",class:"my-5","data-bs-toggle":"collapse","aria-expanded":"false","data-bs-target":"#collapseArtwork","aria-controls":"collapseArtwork"},[g(" 作品列表 "),t("i",{class:"bi bi-arrow-down-circle"})],-1),R=t("hr",null,null,-1),B={class:"collapse",id:"collapseArtwork"},G={class:"d-flex flex-wrap collapse"},O={class:"col-12"},z={class:"w-100"},H=t("thead",{class:"border-bottom"},[t("tr",null,[t("th",null,"作品名稱"),t("th",null,"作品圖片"),t("th",null,"作品描述"),t("th",null,"編輯")])],-1),F=["src"],j=["onClick"],J=["onClick"],W=t("hr",null,null,-1),q={class:"col-12 col"},K=t("h2",{type:"button",class:"my-5","data-bs-toggle":"collapse","aria-expanded":"false","data-bs-target":"#collapseComission","aria-controls":"collapseComission"},[g(" 方案列表 "),t("i",{class:"bi bi-arrow-down-circle"})],-1),Q=t("hr",null,null,-1),X={class:"collapse",id:"collapseComission"},Y={class:"d-flex flex-wrap"},Z={class:"col-12"},$={class:"w-100"},tt=t("thead",{class:"border-bottom"},[t("tr",null,[t("th",null,"方案名稱"),t("th",null,"方案圖片"),t("th",null,"方案描述"),t("th",null,"編輯")])],-1),st=["src"],et=["onClick"],ot=["onClick"],lt=t("hr",null,null,-1),dt={class:"col-12 col"},nt=t("h2",{type:"button",class:"my-5","data-bs-toggle":"collapse","aria-expanded":"false","data-bs-target":"#collapseUser","aria-controls":"collapseUser"},[g(" 使用者列表 "),t("i",{class:"bi bi-arrow-down-circle"})],-1),it=t("hr",null,null,-1),at={class:"collapse",id:"collapseUser"},ct={class:"d-flex flex-wrap"},rt={class:"col-12"},ut={class:"w-100"},_t=t("thead",{class:"border-bottom"},[t("tr",null,[t("th",null,"使用者名稱"),t("th",null,"使用者圖片"),t("th",null,"使用者描述"),t("th",null,"編輯")])],-1),ht=["src"],mt=["onClick"],pt=["onClick"],bt={class:"modal h-100 fade",id:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},yt={class:"modal-dialog h-100"},vt={class:"modal-content h-100"},gt=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"editModalLabel"},"修改產品"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),wt={class:"modal-body h-100"},ft={class:"row align-items-center mb-2"},kt=["src"],Pt={class:"row align-items-center mb-2"},At=t("label",{for:"title",class:"col-2"},"名稱 : ",-1),Ct={class:"row align-items-center mb-2"},xt=t("label",{for:"description",class:"col-2"},"描述 : ",-1),Ut={class:"row align-items-center mb-2"},Dt=t("label",{for:"AuthorID",class:"col-2"},"作者ID : ",-1),It={class:"row align-items-center mb-2"},Mt=t("label",{for:"imageUrl",class:"col-3"},"圖片連結 : ",-1),Et={class:"modal-footer"},Lt=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1),Vt={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"deleteModalLabel","aria-hidden":"true"},St={class:"modal-dialog"},Tt={class:"modal-content"},Nt=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"deleteModalLabel"},"確認刪除"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Rt=t("div",{class:"modal-body"},[t("p",null,"確定要刪除此產品嗎？")],-1),Bt={class:"modal-footer"},Gt=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Ot(l,e,C,zt,o,i){return d(),n("div",V,[t("div",S,[t("div",T,[N,R,t("div",B,[t("div",G,[t("div",O,[t("table",z,[H,t("tbody",null,[(d(!0),n(p,null,b(o.Artwork,s=>(d(),n("tr",{key:s.id},[t("td",null,a(s.title),1),t("td",null,[t("img",{src:s.imageUrl,alt:"作品圖片",width:"200",class:"mw-100"},null,8,F)]),t("td",null,a(s.description),1),t("td",null,[t("button",{type:"button",class:"btn btn-primary",onClick:c(r=>i.editProduct(s),["prevent"])}," 編輯 ",8,j),t("button",{type:"button",class:"btn btn-outline-danger my-2",onClick:c(r=>i.deletProduct(s),["prevent"])}," 刪除 ",8,J)])]))),128))])])])])])]),W,t("div",q,[K,Q,t("div",X,[t("div",Y,[t("div",Z,[t("table",$,[tt,t("tbody",null,[(d(!0),n(p,null,b(o.ComissionList,s=>(d(),n("tr",{key:s.id},[t("td",null,a(s.title),1),t("td",null,[t("img",{src:s.imageUrl,alt:"方案圖片",width:"200",class:"mw-100"},null,8,st)]),t("td",null,a(s.description),1),t("td",null,[t("button",{type:"button",class:"btn btn-primary",onClick:c(r=>i.editProduct(s),["prevent"])}," 編輯 ",8,et),t("button",{type:"button",class:"btn btn-outline-danger my-2",onClick:c(r=>i.deletProduct(s),["prevent"])}," 刪除 ",8,ot)])]))),128))])])])])])]),lt,t("div",dt,[nt,it,t("div",at,[t("div",ct,[t("div",rt,[t("table",ut,[_t,t("tbody",null,[(d(!0),n(p,null,b(o.UserList,s=>(d(),n("tr",{key:s.id},[t("td",null,a(s.title),1),t("td",null,[t("img",{src:s.imageUrl,alt:"使用者圖片",width:"200",class:"mw-100"},null,8,ht)]),t("td",null,a(s.description),1),t("td",null,[t("button",{type:"button",class:"btn btn-primary",onClick:c(r=>i.editProduct(s),["prevent"])}," 編輯 ",8,mt),t("button",{type:"button",class:"btn btn-outline-danger my-2",onClick:c(r=>i.deletProduct(s),["prevent"])}," 刪除 ",8,pt)])]))),128))])])])])])])]),t("div",bt,[t("div",yt,[t("div",vt,[gt,t("div",wt,[t("div",ft,[t("img",{src:o.tempProduct.imageUrl,alt:"修改圖片",width:"200",class:"mw-100 col-12"},null,8,kt)]),t("div",Pt,[At,u(t("input",{type:"text",id:"title",class:"col-10","onUpdate:modelValue":e[0]||(e[0]=s=>o.tempProduct.title=s)},null,512),[[_,o.tempProduct.title]])]),t("div",Ct,[xt,u(t("input",{type:"text",id:"description",class:"col-10","onUpdate:modelValue":e[1]||(e[1]=s=>o.tempProduct.description=s)},null,512),[[_,o.tempProduct.description]])]),t("div",Ut,[Dt,o.tempProduct.category==="作品"||o.tempProduct.category==="報價"?u((d(),n("input",{key:0,type:"text",id:"AuthorID",class:"col-10","onUpdate:modelValue":e[2]||(e[2]=s=>o.tempProduct.author=s)},null,512)),[[_,o.tempProduct.author]]):f("",!0),o.tempProduct.category==="使用者"?u((d(),n("input",{key:1,type:"text",id:"AuthorID",class:"col-10","onUpdate:modelValue":e[3]||(e[3]=s=>o.tempProduct.id=s)},null,512)),[[_,o.tempProduct.id]]):f("",!0)]),t("div",It,[Mt,u(t("textarea",{type:"text",id:"imageUrl",class:"col-9","onUpdate:modelValue":e[4]||(e[4]=s=>o.tempProduct.imageUrl=s)},null,512),[[_,o.tempProduct.imageUrl]])])]),t("div",Et,[Lt,t("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=s=>i.editProductSave())}," 儲存改變 ")])])])]),t("div",Vt,[t("div",St,[t("div",Tt,[Nt,Rt,t("div",Bt,[Gt,t("button",{type:"button",class:"btn btn-danger",onClick:e[6]||(e[6]=s=>i.deleteProductConfirm())}," 確認刪除 ")])])])])])}const Jt=x(L,[["render",Ot]]);export{Jt as default};
