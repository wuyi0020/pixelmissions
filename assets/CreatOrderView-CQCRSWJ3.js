import{V as g,d as k,l as D,c as E,F as U,a as w,E as C,z as I}from"./zh_TW-C7q9EIBL.js";import{_ as L,m as S,t as b,a as O,L as R,r,o as M,c as P,d as t,b as s,w as V,i as c,F as z,B as m,h as F,v as N}from"./index-CtjQsqo1.js";import{U as T}from"./UserState-DclHd5ck.js";import{a as u}from"./axios-Bo0ATomq.js";var q={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"wuyi0020",VITE_ADMIN_USERNAME:"wuyi0020@gmail.com",VITE_ADMIN_PASSWORD:"wuyi0020",BASE_URL:"/pixelmissions/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:h,VITE_API_PATH:f}=q,B=["userName","userEmail","userID","userHasLogIn","AdminToken","Alldata"],W=["checkUserLogin","UserLogout","getAlldata","PushUrl","setAdminToken"];Object.keys(g).forEach(a=>{k(a,g[a])});D({zh_TW:I});E({generateMessage:D("zh_TW"),validateOnInput:!0});const H={data(){return{total:0,form:{user:{name:"",email:"",tel:"",address:"",userid:"",forauthor:""},message:""},ThisComissionData:{},isLoading:!0}},methods:{...S(T,W),loadDone(){this.isLoading=!1},async createOrder(){const a=this.$route.params.id,o=this.Alldata[a].author,p=`${h}/api/${f}/cart`,v=`${h}/api/${f}/order`;this.form.user.userid=this.userID,this.form.user.forauthor=o,u.post(p,{data:{product_id:a,qty:1}}).then(()=>u.post(v,{data:{user:this.form.user,message:this.form.message,createUser:this.userID,forauthor:o}})).then(()=>{b.success("已創建訂單"),this.form={user:{name:"",email:"",tel:"",address:"",userid:"",forauthor:""},message:""}}).then(()=>{this.$router.push({name:"Order"})})},deletCart(){const a=`${h}/api/${f}/admin/orders/all`;u.defaults.headers.common.Authorization=this.AdminToken,u.delete(a).then(()=>{b.success("已刪除購物車")})},getThisComission(){this.ThisComissionData=this.Alldata[this.$route.params.id]}},computed:{...O(T,B)},async mounted(){this.setAdminToken(),this.checkUserLogin(),await this.getAlldata(),this.getThisComission()},components:{VField:U,VForm:w,ErrorMessage:C,Loading:R}},j={class:"container"},G={class:"row"},J={class:"col-12 pt-5"},K=s("div",{class:"d-flex align-items-center"},[s("i",{class:"bi bi-caret-left-fill fs-1 text-white-50"}),s("p",{class:"h3 m-0"},"登記方案")],-1),Q=s("hr",null,null,-1),X={class:"container"},Y={class:"row"},Z={class:"col-12 p-5 pb-0 pb-md-5 bg bg-dark-subtle rounded-5"},$={class:"row g-5"},ss={class:"col-md-4"},es=["src"],os={class:"col-md-8 d-flex flex-column"},ts={class:"card-body"},as={class:"card-title h3"},is={class:"text-secondary mb-0"},ls={class:"text-secondary"},rs={class:"mb-5 fs-2"},ns={class:""},ds=s("hr",null,null,-1),cs={class:"container"},ms=s("div",{class:"row"},[s("div",{class:"col"},[s("h2",{class:"my-2"},"登記資料")])],-1),us={class:"row justify-content-center"},_s={class:"mb-3"},hs=s("label",{for:"email",class:"form-label"},"電子郵件 *",-1),fs={class:"mb-3"},ps=s("label",{for:"name",class:"form-label"},"收件人名稱 *",-1),vs={class:"mb-3"},gs=s("label",{for:"tel",class:"form-label"},"收件人電話 *",-1),bs={class:"mb-3"},Vs=s("label",{for:"address",class:"form-label"},"收件人地址 *",-1),Ts={class:"mb-3"},Ds=s("label",{for:"message",class:"form-label"},"留言",-1),xs=s("div",{class:"text-end"},[s("button",{type:"submit",class:"btn btn-primary"},"送出訂單")],-1);function ys(a,o,p,v,e,_){const x=r("loading"),y=r("router-link"),n=r("v-field"),d=r("error-message"),A=r("v-form");return M(),P(z,null,[t(x,{active:e.isLoading,"onUpdate:active":o[0]||(o[0]=l=>e.isLoading=l),"can-cancel":!0,"on-cancel":a.onCancel,"is-full-page":a.fullPage},null,8,["active","on-cancel","is-full-page"]),s("div",j,[s("div",G,[s("div",J,[t(y,{to:{name:"ComissionView",params:{userid:`${e.ThisComissionData.id}`}},class:"link-underline link-underline-opacity-0 text-white"},{default:V(()=>[K]),_:1},8,["to"]),Q,s("div",X,[s("div",Y,[s("div",Z,[s("div",$,[s("div",ss,[s("img",{src:e.ThisComissionData.imageUrl,class:"img-fluid rounded-start-0 ratio-1x1 mh-100",alt:"方案",onLoad:o[1]||(o[1]=(...l)=>_.loadDone&&_.loadDone(...l))},null,40,es)]),s("div",os,[s("div",ts,[s("h3",as,c(e.ThisComissionData.title),1),s("p",is,c(e.ThisComissionData.description),1),s("p",ls,c(e.ThisComissionData.content),1)]),s("div",rs,[s("span",ns,c(e.ThisComissionData.price)+" TWD",1)])])])])])]),ds])])]),s("div",cs,[ms,s("div",us,[t(A,{ref:"form",class:"col-md-8 col-lg-6",onSubmit:_.createOrder},{default:V(({errors:l})=>[s("div",_s,[hs,t(n,{id:"email",name:"電子郵件",type:"email",class:m(["form-control",{"is-invalid":l.電子郵件}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:e.form.user.email,"onUpdate:modelValue":o[2]||(o[2]=i=>e.form.user.email=i)},null,8,["class","modelValue"]),t(d,{name:"電子郵件",class:"invalid-feedback"})]),s("div",fs,[ps,t(n,{id:"name",name:"收件人",type:"text",class:m(["form-control",{"is-invalid":l.收件人}]),placeholder:"請輸入名稱",rules:"required",modelValue:e.form.user.name,"onUpdate:modelValue":o[3]||(o[3]=i=>e.form.user.name=i)},null,8,["class","modelValue"]),t(d,{name:"收件人",class:"invalid-feedback"})]),s("div",vs,[gs,t(n,{id:"tel",name:"電話",type:"text",class:m(["form-control",{"is-invalid":l.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:e.form.user.tel,"onUpdate:modelValue":o[4]||(o[4]=i=>e.form.user.tel=i)},null,8,["class","modelValue"]),t(d,{name:"電話",class:"invalid-feedback"})]),s("div",bs,[Vs,t(n,{id:"address",name:"地址",type:"text",class:m(["form-control",{"is-invalid":l.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:e.form.user.address,"onUpdate:modelValue":o[5]||(o[5]=i=>e.form.user.address=i)},null,8,["class","modelValue"]),t(d,{name:"地址",class:"invalid-feedback"})]),s("div",Ts,[Ds,F(s("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":o[6]||(o[6]=i=>e.form.message=i)},null,512),[[N,e.form.message]])]),xs]),_:1},8,["onSubmit"])])])],64)}const ws=L(H,[["render",ys]]);export{ws as default};
